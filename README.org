* verbes
GET
PUT
DELETE

* Creating an index
#+BEGIN_SRC sh
curl -XPUT "http://localhost:9200/ecommerce" -d' { }'
{"acknowledged":true}
#+END_SRC

* deleting an index
#+BEGIN_SRC sh
curl -XDELETE "http://localhost:9200/ecommerce"
{"acknowledged":true}
#+END_SRC

* cat command
#+BEGIN_SRC sh
curl -XGET "http://localhost:9200/_cat/indices?v"
#+END_SRC

* Data Types
** Core
1. String
2. Numeric
3. Date
4. Boolean
5. Binary (Base64)  it is not searchable

** Complex Types
1. Object (flat list of key/value pairs)
2. Arrays (not supported )
3. Nested data types
4. Geo Data Types (rectangles and polygons)
5. Attachment

* Meta fields
each document has metadata
e.g.  _index, _type, _id


** document source meta fields
_source

_size

** indexing meta fields
_ALL

_FIELDS_NAMES

** routing meta fields
_PARENT (foreign key)

_ROUTING (advanced)

_META


* configuration for master
#+BEGIN_SRC sh
root@es0:~# cat /etc/elasticsearch/elasticsearch.yml
cluster.name: mycluster
node.name: "es0"
node.master: true
node.data: false
http.port : 9200
tcp.port : 9300
discovery.zen.ping.multicast.enabled: false
discovery.zen.ping.unicast.hosts: ["data0", "data1", "data2"]
network.bind_host: 0.0.0.0
network.publish_host: 172.20.20.50
#+END_SRC

* configuration for data
** node1
#+BEGIN_SRC sh
root@es1:~# cat /etc/elasticsearch/elasticsearch.yml
cluster.name: mycluster
node.name: "es1"
node.master: false
node.data: true
http.port : 9200
tcp.port : 9300
discovery.zen.ping.multicast.enabled: false
discovery.zen.ping.unicast.hosts: ["data0", "data1", "data2"]
network.bind_host: 0.0.0.0
network.publish_host: 172.20.20.51
#+END_SRC

** node2
#+BEGIN_SRC sh
root@es2:~# cat /etc/elasticsearch/elasticsearch.yml
cluster.name: mycluster
node.name: "es2"
node.master: false
node.data: true
http.port : 9200
tcp.port : 9300
discovery.zen.ping.multicast.enabled: false
discovery.zen.ping.unicast.hosts: ["data0", "data1", "data2"]
network.bind_host: 0.0.0.0
network.publish_host: 172.20.20.52
#+END_SRC

* check health
#+BEGIN_SRC sh
root@es0:~# curl -XGET 'http://localhost:9200/_cluster/health'?pretty
{
  "cluster_name" : "mycluster",
  "status" : "green",
  "timed_out" : false,
  "number_of_nodes" : 2,
  "number_of_data_nodes" : 1,
  "active_primary_shards" : 0,
  "active_shards" : 0,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 0,
  "delayed_unassigned_shards" : 0,
  "number_of_pending_tasks" : 7,
  "number_of_in_flight_fetch" : 0,
  "task_max_waiting_in_queue_millis" : 23857,
  "active_shards_percent_as_number" : 100.0
}
#+END_SRC



* Create index and mappings
** SENSE format
#+BEGIN_SRC sh
PUT /ecommerce
{
    "mappings": {
        "product": {
            "properties": {
                "name": {
                    "type": "double"
                },
                "price": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "quantity": {
                    "type": "integer"
                },
                "categories": {
                    "type": "nested",
                    "properties": {
                        "name": {
                            "type": "string"
                        }
                    }
                },
                "tags": {
                    "type": "string"
                }
            }
        }
    }
}
#+END_SRC

** curl format
#+BEGIN_SRC sh
curl -XPUT "http://localhost:9200/ecommerce" -d'
{
    "mappings": {
        "product": {
            "properties": {
                "name": {
                    "type": "double"
                },
                "price": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "quantity": {
                    "type": "integer"
                },
                "categories": {
                    "type": "nested",
                    "properties": {
                        "name": {
                            "type": "string"
                        }
                    }
                },
                "tags": {
                    "type": "string"
                }
            }
        }
    }
}'
#+END_SRC


* Addming Test Data

* plugins
** head
http://localhost:9200/_plugin/head/
